{"version":3,"file":"tool-form-composite.js","sources":["../../../src/mvc/tool/tool-form-composite.js"],"names":["define","Utils","Deferred","Ui","Form","FormData","ToolFormBase","Modal","View","Backbone","extend","initialize","options","this","modal","parent","Galaxy","model","Model","deferred","setElement","$","addClass","append","$message","$header","$history","$parameters","$steps","$el","_configure","render","_handleWorkflowParameter","value","callback","wp_name","self","_isWorkflowParameter","wp_inputs","label","name","type","color","wp_count","style","links","forms","steps","parms","_","each","get","step","i","emit","debug","merge","index","parseInt","icon","help","description","annotation","citations","collapsible","collapsed","_isDataStep","sustain_version","sustain_repeats","sustain_conditionals","narrow","text_enable","text_disable","cls_enable","cls_disable","errors","messages","initial_errors","visitInputs","inputs","input","output_connections","output_connection","sub_step","step_id","input_step_id","push","j","connections_by_name","connection","input_name","step_linked","output_name","wp_input","wp_linked","backdrop","post_job_actions","pja","action_arguments","arg","step_type","data_resolved","context","is_data_input","indexOf","data_ref","length","is_workflow","__class__","flavor","optional","isEmpty","collapsible_value","collapsible_preview","reset","_renderHeader","_renderMessage","_renderParameters","_renderHistory","_renderStep","execute","execute_btn","unwait","set","Button","title","cls","wait","wait_text","onclick","_execute","empty","Label","Message","message","status","persistent","wp_form","onchange","input_list","input_def","_refreshStep","_append","form","current","promise","portlet","html","reduce","memo","short_str","link","_resolve","setTimeout","ready","resolve","field","field_list","data","match","new_value","undefined","values","source_step","create","v","multiple","wp_field","trigger","history_form","test_param","cases","job_def","new_history_name","replacement_params","validated","job_inputs","job_input_id","input_value","input_id","highlight","_enabled","request","url","root","id","success","response","_templateSuccess","currHistoryPanel","refreshContents","error","err_data","step_related_errors","error_messages","matchResponse","show","body","_templateError","err_msg","buttons","Close","hide","complete","$container","enabled","enable","disable","String","substring","sanitize","lst","isArray","startsWith","text","invocation","$invocation","history","attr","outputs","output","hid","JSON","stringify"],"mappings":"AACAA,QAAS,cAAe,iBAAkB,iBAAkB,qBAAsB,qBAAsB,0BAA2B,mBAC/H,SAAUC,EAAOC,EAAUC,EAAIC,EAAMC,EAAUC,EAAcC,GAC7D,GAAIC,GAAOC,SAASD,KAAKE,QACrBC,WAAY,SAAUC,GAClBC,KAAKC,MAAQC,OAAOC,OAAOF,OAAS,GAAIP,GAAMC,KAC9CK,KAAKI,MAAQL,GAAWA,EAAQK,OAAS,GAAIR,UAASS,MAAON,GAC7DC,KAAKM,SAAW,GAAIjB,GACpBW,KAAKO,WAAYC,EAAG,UAAWC,SAAU,qBACVC,OAAQV,KAAKW,SAAgBH,EAAG,WAChCE,OAAQV,KAAKY,QAAgBJ,EAAG,WAChCE,OAAQV,KAAKa,SAAgBL,EAAG,WAChCE,OAAQV,KAAKc,YAAgBN,EAAG,WAChCE,OAAQV,KAAKe,OAAgBP,EAAG,YAC/DA,EAAG,QAASE,OAAQV,KAAKgB,KACzBhB,KAAKiB,aACLjB,KAAKkB,UAITD,WAAY,WAyER,QAASE,GAA0BC,EAAOC,GACtC,GAAIC,GAAUC,EAAKC,qBAAsBJ,EACzCE,IAAWD,EAAUE,EAAKE,UAAWH,GAAYC,EAAKE,UAAWH,KAC7DI,MAAUJ,EACVK,KAAUL,EACVM,KAAU,OACVC,MAAU,QAAyB,MAAXC,EAAmB,eAC3CC,MAAU,oBACVC,WAhFR,GAAIT,GAAOvB,IACXA,MAAKiC,SACLjC,KAAKkC,SACLlC,KAAKgC,SACLhC,KAAKmC,SACLC,EAAEC,KAAMrC,KAAKI,MAAMkC,IAAK,SAAW,SAAUC,EAAMC,GAC/CrC,OAAOsC,KAAKC,MAAO,oCAAqCF,EAAI,+BAC5DD,EAAOnD,EAAMuD,OACTC,MAA0BJ,EAC1Bb,KAA0B,SAAYkB,SAAUL,GAAM,GAAM,KAAOD,EAAKZ,KACxEmB,KAA0B,GAC1BC,KAA0B,KAC1BC,YAA0BT,EAAKU,YAAc,MAAQV,EAAKU,YAAcV,EAAKS,YAC7EE,UAA0B,KAC1BC,aAA0B,EAC1BC,UAA0BZ,EAAI,IAAMjB,EAAK8B,YAAad,GACtDe,iBAA0B,EAC1BC,iBAA0B,EAC1BC,sBAA0B,EAC1BC,QAA0B,EAC1BC,YAA0B,OAC1BC,aAA0B,OAC1BC,WAA0B,aAC1BC,YAA0B,aAC1BC,OAA0BvB,EAAKwB,SAC/BC,gBAA0B,GAC3BzB,GACHhB,EAAKW,MAAOM,GAAMD,EAClBhB,EAAKS,MAAOQ,MACZjB,EAAKY,MAAOK,QAIhBJ,EAAEC,KAAMrC,KAAKkC,MAAO,SAAUK,EAAMC,GAChChD,EAASyE,YAAa1B,EAAK2B,OAAQ,SAAUC,EAAOxC,GAChDJ,EAAKY,MAAOK,GAAKb,GAASwC,MAKlC/B,EAAEC,KAAMrC,KAAKkC,MAAO,SAAUK,EAAMC,GAChCJ,EAAEC,KAAME,EAAK6B,mBAAoB,SAAUC,GACvCjC,EAAEC,KAAMd,EAAKW,MAAO,SAAUoC,GAC1BA,EAASC,UAAYF,EAAkBG,eAAiBjD,EAAKS,MAAOQ,GAAIiC,KAAMH,SAO1FlC,EAAEC,KAAMrC,KAAKkC,MAAO,SAAUK,EAAMC,GAChCJ,EAAEC,KAAMd,EAAKW,MAAO,SAAUoC,EAAUI,GACpC,GAAIC,KACJvC,GAAEC,KAAME,EAAK6B,mBAAoB,SAAUQ,GACvCN,EAASC,UAAYK,EAAWJ,gBAAmBG,EAAqBC,EAAWC,YAAeD,KAEtGxC,EAAEC,KAAMd,EAAKY,MAAOuC,GAAK,SAAUP,EAAOxC,GACtC,GAAIiD,GAAaD,EAAqBhD,EACjCiD,KACDT,EAAMvC,KAAO,SACbuC,EAAMpB,KAAOoB,EAAMW,YAAcX,EAAMpB,KAAO,KAAO,GACrDoB,EAAMpB,MAAQ,mBAAsB6B,EAAWG,YAAc,gBAAoBlC,SAAUL,GAAM,GACjG2B,EAAMW,YAAcX,EAAMW,gBAC1BX,EAAMW,YAAYL,KAAMlC,SAOxC,IAAIT,GAAW,CACf9B,MAAKyB,aAYLW,EAAEC,KAAMrC,KAAKkC,MAAO,SAAUK,EAAMC,GAChCJ,EAAEC,KAAMd,EAAKY,MAAOK,GAAK,SAAU2B,GAC/BhD,EAA0BgD,EAAM/C,MAAO,SAAU4D,GAC7CA,EAAShD,MAAMyC,KAAMlC,GACrB4B,EAAMc,UAAYD,EAASrD,KAC3BwC,EAAMtC,MAAYmD,EAASnD,MAC3BsC,EAAMvC,KAAY,OAClBuC,EAAM/C,MAAY,KAClB+C,EAAMe,UAAY,EAClBf,EAAMpC,MAAY,wBAG1BK,EAAEC,KAAME,EAAK4C,iBAAkB,SAAUC,GACrChD,EAAEC,KAAM+C,EAAIC,iBAAkB,SAAUC,GACpCnE,EAA0BmE,EAAK,oBAO3ClD,EAAEC,KAAMrC,KAAKkC,MAAO,SAAUK,GAC1B,GAAuB,QAAlBA,EAAKgD,UAAsB,CAC5B,GAAIC,IAAgB,CACpBhG,GAASyE,YAAa1B,EAAK2B,OAAQ,SAAWC,EAAOxC,EAAM8D,GACvD,GAAIC,GAAyE,KAAtD,OAAQ,mBAAqBC,QAASxB,EAAMvC,MAC/DgE,EAAWH,EAAStB,EAAMyB,SAC9BzB,GAAMW,cAAgBvD,EAAK8B,YAAac,EAAMW,eAAmBU,GAAgB,GACjFrB,EAAMpE,UAAuC,GAAxBoE,EAAMpE,QAAQ8F,SAAgBL,GAAmBrB,EAAMc,aAAiBd,EAAM2B,aAAc,GACjHF,IAAczB,EAAM2B,YAAgBF,EAASd,cAAgBvD,EAAK8B,YAAauC,EAASd,cAAmBX,EAAMc,YAC/GS,GAAmBvB,EAAM/C,OAAkC,gBAAzB+C,EAAM/C,MAAM2E,YAAgC5B,EAAMW,eAAqBvC,EAAKa,WAAY,GAC5He,EAAM/C,OAAkC,gBAAzB+C,EAAM/C,MAAM2E,YAAiC5B,EAAM/C,MAAQ,MAC1E+C,EAAM6B,OAAS,WACTN,GAAgC,WAAfvB,EAAMvC,MAAsBuC,EAAMc,YAChDd,EAAM8B,WAAe7G,EAAM8G,QAAS/B,EAAM/C,QAA2B,KAAhB+C,EAAM/C,SAC5D+C,EAAMgC,kBAAoBhC,EAAM/C,MAChC+C,EAAMiC,qBAAsB,SAQpDlF,OAAQ,WACJ,GAAIK,GAAOvB,IACXA,MAAKM,SAAS+F,QACdrG,KAAKsG,gBACLtG,KAAKuG,iBACLvG,KAAKwG,oBACLxG,KAAKyG,iBACLrE,EAAEC,KAAOrC,KAAKkC,MAAO,SAAUK,EAAMC,GAAMjB,EAAKmF,YAAanE,EAAMC,KACnExC,KAAKM,SAASqG,QAAS,WAAapF,EAAKqF,YAAYC,SACjBtF,EAAKqF,YAAYxG,MAAM0G,IAAK,YAAa,iBAIjFR,cAAe,WACX,GAAI/E,GAAOvB,IACXA,MAAK4G,YAAc,GAAItH,GAAGyH,QACtBjE,KAAc,WACdkE,MAAc,eACdC,IAAc,kBACdC,MAAc,EACdC,UAAc,aACdC,QAAc,WAAa7F,EAAK8F,cAEpCrH,KAAKY,QAAQH,SAAU,kBAAmB6G,QAC7B5G,OAAQ,GAAIpB,GAAGiI,OAASP,MAAO,aAAehH,KAAKI,MAAMkC,IAAK,UAAatB,KAC3EN,OAAQV,KAAK4G,YAAY5F,MAI1CuF,eAAgB,WACZvG,KAAKW,SAAS2G,QACTtH,KAAKI,MAAMkC,IAAK,yBACjBtC,KAAKW,SAASD,OAAQ,GAAIpB,GAAGkI,SACzBC,QAAc,qRACdC,OAAc,UACdC,YAAc,IACd3G,MAKZwF,kBAAmB,WACf,GAAIjF,GAAOvB,IACXA,MAAK4H,QAAU,KACTxF,EAAE8D,QAASlG,KAAKyB,aAClBzB,KAAK4H,QAAU,GAAIrI,IAAOyH,MAAO,6BAA8B9C,OAAQlE,KAAKyB,UAAWoG,SAAU,WAC7FzF,EAAEC,KAAMd,EAAKqG,QAAQE,WAAY,SAAUC,GACvC3F,EAAEC,KAAM0F,EAAU/F,MAAO,SAAUO,GAC/BhB,EAAKyG,aAAczF,UAI/BvC,KAAKiI,QAASjI,KAAKc,YAAYwG,QAAStH,KAAK4H,QAAQ5G,OAK7D0F,YAAa,SAAUnE,EAAMC,GACzB,GAAIjB,GAAOvB,KACPkI,EAAO,KACPC,EAAU,IACdnI,MAAKM,SAASqG,QAAS,SAAUyB,GAC7BD,EAAUC,EACa,QAAlB7F,EAAKgD,WACN2C,EAAO,GAAIzI,GAAc8C,GACpBA,EAAK4C,kBAAoB5C,EAAK4C,iBAAiBU,QAChDqC,EAAKG,QAAQ3H,OAAQF,EAAG,UAAWC,SAAU,4BACxCC,OAAQF,EAAG,UAAWC,SAAU,iBAAkB6H,KAAM,qBACxD5H,OAAQF,EAAG,UAAWC,SAAU,mBAAoB6H,KACjDlG,EAAEmG,OAAQhG,EAAK4C,iBAAkB,SAAUqD,EAAMpH,GAC7C,MAAOoH,GAAO,IAAMpH,EAAMqH,WAC3B,OAGflH,EAAK0G,QAAS1G,EAAKR,OAAQmH,EAAKlH,OAEhCoB,EAAEC,KAAME,EAAK2B,OAAQ,SAAUC,GAAUA,EAAM6B,OAAS,WACxDkC,EAAO,GAAI3I,GAAMH,EAAMuD,OACnBqE,MAAW,MAAQzE,EAAKZ,KAAO,OAC/BkG,SAAW,WAAazF,EAAEC,KAAMd,EAAKS,MAAOQ,GAAK,SAAUkG,GAASnH,EAAKyG,aAAcU,OACxFnG,IACHhB,EAAK0G,QAAS1G,EAAKR,OAAQmH,EAAKlH,MAEpCO,EAAKU,MAAOO,GAAM0F,EAClB3G,EAAKyG,aAAczF,GACnBpC,OAAOsC,KAAKC,MAAO,oCAAqCF,EAAI,gCAAiCD,GAC7FhB,EAAKoH,SAAUT,EAAK5H,SAAU8H,MAKtCO,SAAU,SAAUrI,EAAU8H,GAC1B,GAAI7G,GAAOvB,IACX4I,YAAY,WACHtI,GAAYA,EAASuI,UAAYvI,EAClC8H,EAAQU,UAERvH,EAAKoH,SAAUrI,EAAU8H,IAE9B,IAIPJ,aAAc,SAAUzF,GACpB,GAAIhB,GAAOvB,KACPkI,EAAOlI,KAAKiC,MAAOM,EAAKK,MACvBsF,KACD9F,EAAEC,KAAMd,EAAKY,MAAOI,EAAKK,OAAS,SAAUuB,EAAOxC,GAC/C,GAAKwC,EAAMW,aAAeX,EAAMc,UAAY,CACxC,GAAI8D,GAAQb,EAAKc,WAAYd,EAAKe,KAAKC,MAAOvH,GAC9C,IAAKoH,EAAQ,CACT,GAAII,GAAYC,MAChB,IAAKjF,EAAMW,YACPqE,GAAcE,WACdjH,EAAEC,KAAM8B,EAAMW,YAAa,SAAUwE,GAC5B/H,EAAK8B,YAAaiG,KACnBlI,MAAQG,EAAKU,MAAOqH,EAAY1G,OAAQqG,KAAKM,SAASpF,MACtD/C,OAASgB,EAAEC,KAAMjB,MAAMiI,OAAQ,SAAUG,GAAML,EAAUE,OAAO5E,KAAM+E,SAGxErF,EAAMsF,UAAYN,EAAUE,OAAOxD,OAAS,IAC9CsD,GAAcE,QAAUF,EAAUE,OAAQ,UAE3C,IAAKlF,EAAMc,UAAY,CAC1B,GAAIyE,GAAWnI,EAAKqG,QAAQoB,WAAYzH,EAAKqG,QAAQqB,KAAKC,MAAO/E,EAAMc,WACvEyE,KAAcP,EAAYO,EAAStI,SAEpBgI,SAAdD,GACDJ,EAAM3H,MAAO+H,OAK7BjB,EAAKyB,QAAS,YAKtBlD,eAAgB,WACZzG,KAAK4J,aAAe,KACd5J,KAAKI,MAAMkC,IAAK,gBAClBtC,KAAK4J,aAAe,GAAIrK,IACpB2E,SACItC,KAAc,cACdD,KAAc,cACdkI,YACIlI,KAAc,QACdD,MAAc,gCACdE,KAAc,UACdR,MAAc,QACd2B,KAAc,IAElB+G,QACI1I,MAAU,OACV8C,SACIvC,KAAU,OACVD,MAAU,eACVE,KAAU,OACVR,MAAUpB,KAAKI,MAAMkC,IAAK,gBAK1CtC,KAAKiI,QAASjI,KAAKa,SAASyG,QAAStH,KAAK4J,aAAa5I,OAK/DqG,SAAU,WACN,GAAI9F,GAAOvB,KACP+J,GACAC,iBAAsBhK,KAAK4J,aAAaX,KAAKM,SAAU,oBACvDU,mBAAsBjK,KAAK4H,QAAU5H,KAAK4H,QAAQqB,KAAKM,YACvDrF,WAEAgG,GAAY,CAChB,KAAM,GAAI1H,KAAKxC,MAAKiC,MAAQ,CACxB,GAAIiG,GAAOlI,KAAKiC,MAAOO,GACnB2H,EAAcjC,EAAKe,KAAKM,SACxBhH,EAAchB,EAAKW,MAAOM,GAC1B+B,EAAchC,EAAKgC,OACvB2D,GAAKyB,QAAS,QACd,KAAM,GAAIS,KAAgBD,GAAa,CACnC,GAAIE,GAAcF,EAAYC,GAC1BE,EAAcpC,EAAKe,KAAKC,MAAOkB,GAE/BrC,GADcG,EAAKc,WAAYsB,GACjBpC,EAAKJ,WAAYwC,GACnC,KAAMvC,EAAUjD,YAAc,CAM1B,GAJIoF,EADClK,KAAKqD,YAAad,GACP8H,GAAeA,EAAYhB,QAAUgB,EAAYhB,OAAOxD,OAAS,EAEjEkC,EAAU9B,UAAc8B,EAAUjC,aAA+B,KAAhBuE,IAA2BtC,EAAUjC,aAA+B,OAAhBuE,GAE/GH,EAAY,CACdhC,EAAKqC,UAAWD,EAChB,OAEJP,EAAQ7F,OAAQK,GAAYwF,EAAQ7F,OAAQK,OAC5CwF,EAAQ7F,OAAQK,GAAW6F,GAAiBD,EAAYC,IAGhE,IAAMF,EACF,MAGFA,GAIF3I,EAAKiJ,UAAU,GACfrK,OAAOsC,KAAKC,MAAO,gCAAiC,uBAAwBqH,GAC5E3K,EAAMqL,SACF7I,KAAU,OACV8I,IAAUvK,OAAOwK,KAAO,0BAA4B3K,KAAKI,MAAMwK,GAAK,OACpE3B,KAAUc,EACVc,QAAU,SAAUC,GAChB3K,OAAOsC,KAAKC,MAAO,8BAA+B,yBAA0BoI,GAC5EvJ,EAAKP,IAAIsG,QAAQ5G,OAAQa,EAAKwJ,iBAAkBD,IAChD5K,OAAOC,QAAUD,OAAOC,OAAO6K,kBAAoB9K,OAAOC,OAAO6K,iBAAiBC,mBAEtFC,MAAU,SAAUJ,GAEhB,GADA3K,OAAOsC,KAAKC,MAAO,8BAA+B,qBAAsBoI,GACnEA,GAAYA,EAASK,SACtB,IAAM,GAAI3I,KAAKjB,GAAKU,MAAQ,CACxB,GAAIiG,GAAO3G,EAAKU,MAAOO,GACnB4I,EAAsBN,EAASK,SAAUjD,EAAKnI,QAAQwE,QAC1D,IAAK6G,EAAsB,CACvB,GAAIC,GAAiBnD,EAAKe,KAAKqC,cAAeF,EAC9C,KAAM,GAAId,KAAYe,GAAiB,CACnCnD,EAAKqC,UAAWD,EAAUe,EAAgBf,GAC1C,aAKZ/I,GAAKtB,MAAMsL,MACPvE,MAAU,wBACVwE,KAAUjK,EAAKkK,eAAgBX,GAAYA,EAASY,SAAW3B,GAC/D4B,SACIC,MAAU,WACNrK,EAAKtB,MAAM4L,YAM/BC,SAAU,WACNvK,EAAKiJ,UAAU,QAzCvBjJ,EAAKiJ,UAAU,GACfrK,OAAOsC,KAAKC,MAAO,gCAAiC,qBAAsBqH,KA+ClF9B,QAAS,SAAU8D,EAAY/K,GAC3B+K,EAAWrL,OAAQ,QAASD,SAAU,iBAAkBC,OAAQM,IAIpEwJ,SAAU,SAAUwB,GACXA,EAAYhM,KAAK4G,YAAYC,SAAkB7G,KAAK4G,YAAYM,OAChE8E,EAAYhM,KAAK4J,aAAavB,QAAQ4D,SAAkBjM,KAAK4J,aAAavB,QAAQ6D,UACvF9J,EAAEC,KAAMrC,KAAKiC,MAAO,SAAUiG,GAAc8D,EAAa9D,EAAKG,QAAQ4D,SAAkB/D,EAAKG,QAAQ6D,aAIzG1K,qBAAsB,SAAUJ,GAC5B,MAA2C,MAAtC+K,OAAQ/K,GAAQgL,UAAW,EAAG,GACxBhN,EAAMiN,SAAUjL,EAAMgL,UAAW,EAAIhL,EAAMyE,OAAS,IAD/D,QAMJxC,YAAa,SAAUnB,GACnBoK,IAAM9L,EAAE+L,QAASrK,GAAUA,GAAUA,EACrC,KAAM,GAAIM,GAAI,EAAGA,EAAI8J,IAAIzG,OAAQrD,IAAM,CACnC,GAAID,GAAO+J,IAAK9J,EAChB,KAAMD,IAASA,EAAKgD,YAAchD,EAAKgD,UAAUiH,WAAY,QACzD,OAAO,EAGf,OAAO,GAIXzB,iBAAkB,SAAUD,GACxB,GAAKA,GAAYA,EAASjF,OAAS,EAAI,CACnC,GAAIlF,GAAWH,EAAG,UAAWC,SAAU,oBACtBC,OAAQF,EAAG,QAASiM,KAAM,8BAAiCzM,KAAKI,MAAMkC,IAAK,QAAW,6GACvG,KAAM,GAAIE,KAAKsI,GAAW,CACtB,GAAI4B,GAAa5B,EAAUtI,GACvBmK,EAAcnM,EAAG,UAAWC,SAAU,+BAC1CiM,GAAWE,SAAWD,EAAYjM,OAAQF,EAAG,QAASiM,KAAM,iDAC1B/L,OAAQF,EAAG,QAASC,SAAU,oBACVoM,KAAM,kBAAmBH,EAAWE,QAAQhC,IAC5CiC,KAAM,SAAU,QAChBA,KAAM,OAAQ,sCAAwCH,EAAWE,QAAQhC,IACzE6B,KAAMC,EAAWE,QAAQjL,QAC/ES,EAAEC,KAAMqK,EAAWI,QAAS,SAAUC,GAClCJ,EAAYjM,OAAQF,EAAG,UAAWC,SAAU,cAAe6H,KAAM,MAAQyE,EAAOC,IAAM,SAAWD,EAAOpL,SAE5GhB,EAASD,OAAQiM,GAErB,MAAOhM,GAEP,MAAOX,MAAKyL,eAAgBX,IAIpCW,eAAgB,SAAUX,GACtB,MAAQtK,GAAG,UAAWC,SAAU,qBAC3BC,OAAQF,EAAG,QAASiM,KAAM,sGAC1B/L,OAAQF,EAAG,UAAWiM,KAAMQ,KAAKC,UAAWpC,EAAU,KAAM,OAGzE,QACInL,KAAMA"}